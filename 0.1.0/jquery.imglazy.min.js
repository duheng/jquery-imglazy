!function(){function t(t){function o(){console.info("loadImg start!");for(var t,o,i,h=0,u=s.length,d=a.scrollTop(),m=a.height();u>h;)t=s[h],o=t.offset().top,i=d+m+l>=o,i=i&&(!c.viewport||o+t.height()+l>=d),e||i?(t.attr("src",t.attr(r)).removeAttr(r),"fadeIn"===c.effect&&t.css("opacity",0).animate({opacity:1}),s.splice(h,1),u--):h++;0===u&&a.off(f,n)}var e,i,n,a=$(window),c=$.extend({selector:"img[data-src]",dataSrc:"data-src",effect:"none",threshold:0,timeout:0,viewport:!1},t),r=c.dataSrc,l=c.threshold,f="scroll resize",s=[];this.init=function(){s.length=0,e=!1,$(c.selector).each(function(){s.push($(this))}),a.off(f,n),a.on(f,n),n()},this.loadAll=function(){e=!0,n()},n=0===c.timeout?o:function(){clearTimeout(i),i=setTimeout(o,c.timeout)}}$.imgLazy=function(o){var e=new t(o);$.imgLazy=e.init,$.imgLazy.loadAll=e.loadAll,e.init()}}();